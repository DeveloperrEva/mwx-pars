{
"id": 40239, 
"version": 9,
"title": "MangaNi",
"host": "https://mangani.ru",
"public_link": "https://mangani.ru/search/?cat=2",

"folder": "mangani",
"hash_tag" : "mangani",
"name": "mangani",
"chapters_order": true,
"language": "ru",
"encoding": "utf-8",

"icon_link": "https://raw.githubusercontent.com/veopot/mwx-json/main/img/mangani.png",
"self_link": "https://raw.githubusercontent.com/veopot/mwx-json/main/parsers/mangani.json",
"self_link2": "https://fant.my1.ru/mwparser/mwx/json/mangani.json",
"catalog_link": "https://raw.githubusercontent.com/veopot/mwx-json/main/catalogs/mangani.zip",
"file_type": "sqlite",

"author": {"name": "Veopot","email": "fant-net@ya.ru"},

"authorization_complete": {
		"logo": "https://mangani.ru/i/favicon.ico",
		"registration": "https://mangani.ru/register",
		"expires": 31536000,
		"is_redirect": true,

		"values": {

			"login[login]": {
				"label": "Логин",
				"hint": "Введите свой логин с сайта MangaNi!",
				"kind": "text"
			},

			"login[pass]": {
				"label": "Пароль",
				"hint": "Введите свой пароль с сайта MangaNi!",
				"kind": "password"
			},
      "headers": {
			"Accept": "*/*" },

			"mature": {
				"forward": "cookie",
				"value": "c3a2ed4b199a1a15f5a5483504c7a75a7030dc4bi%3A1%3B"
			}
		},

		"request": {
			"method": "post",
			"url": "https://mangani.ru/"
		},
		"response_check": {
			"headers": {
	    	"Set-Cookie": "@%22login"
		
			}
		}
	},


                          


"manga_search_complete": {		
 "search_link":"https://mangani.ru/search/index/t/$query$/cat/30/s_lang/0/t_lang/0/sort/4/n_chapters//Book_page/$page$",
		"query_type": "GET",
		"add_manga": {
		     "start": "<ul class='search-results'>", 
             "next": "class='th'>",
			
			"link": {
			    "skip": "<a",
				"token1": "href='/book/",
				"token2": "'>",
				"replace": {
					"prefix": "https://mangani.ru/book/"
				}
			},
			"title": {
				"skip": "href='",
				"token1": "'>",
				"token2": "</",
			"replace": {
				"match": "Манга",
				"text": ""
			}
			},
			
			"uniq": {
				"skip": "href='",
				"token1": "book/",
				"token2": "'>"
			},
			
			"is_mature": { 
			    "start": ">тэги:", 
				"values": ["+18", "18+", "эротика"],
				"end": "</p" },
			 
			"add_genres":{ 
			"start": ">жанры:", 
			"next": "href=\"/genre/",
			"token1": "\">",
			"token2": "</",
			"end": ">тэги:"
			},
			"cover": {
			    "after": "<img",
				"token1": "src='",
				"token2": "'",
			    "replace": {
					"prefix": "https://mangani.ru"
				}
			}
		}
},


"manga_list_complete": {
		"iterator": {
			"base_url": "https://mangani.ru/search/index/t//cat/30/s_lang/0/t_lang/0/adult/0/sort/5/n_chapters//Book_page/",
			"append_nums": {
				"from": 1,
				"to": 285,
				"sufix": "/"
			}
		},

		
		"add_manga": {
			"next": "<div class='th'>",
			 
			"link": {
				"token1": "href='/book/",
				"token2": "'>",
				"replace": {
					"prefix": "https://mangani.ru/book/"
				}
			},
			
			"title": {
				"skip": "href='",
				"token1": "'>",
				"token2": "</"
			},
			
			
			"cover": { 
			"after": "<img",
          "before":" alt=",
			"token1": "src='/i/book/", 
			"token2": "'",
			"replace": {"prefix": "https://mangani.ru/i/book/"}},
			
			"uniq": {
				"skip": "href='",
				"token1": "book/",
				"token2": "'>"
			}
		}
		
	},	
	
"manga_complete": {

    "headers": {
			"cookie": "mature=c3a2ed4b199a1a15f5a5483504c7a75a7030dc4bi%3A1%3B"
		},
	
	"title": {
			"skip": "<li class=\"active",
			"token1":"<h1>", 
			"token2": "</h1>",
			"replace": {
				"match": "Манга ",
				"text": ""
			} },
			 
		 
	"uniq": {
			"skip": "var Book = new CBook",
			"token1": "id:",
			"token2": ","
		    },
	"summary": {
			"skip": "class='btn btn-info'>",
			"token1": "</div><p>",
			"token2": "</p",
			"replace": { "match": "<.*>", "text": " " }
		    },
	"author":      { "skip": ">Автор:</", "token1": "'>", "token2": "</a" },
	
	
	"status": { 
	   "complete": {
        "start" : ">Выпуск:",
        "end" : "</em>",
        "value" : "завершён"
    },
	 "ongoing": {
        "start" : ">Выпуск:",
        "end" : "</em>",
        "value" : "продолжается"
    }
	},		 
	"add_genre": {
			"after": "href=\"/search?genres%5B0%5D=",
			"token1": "\">",
			"token2": "</"
		},
		
		"add_tag": {
			"after": "href=\"/tag/?search=",
			"token1": "\">",
			"token2": "</"
		},
			
    "is_mature": {
			"start": ">Тэги:<",
			"end": ">Готово:<",
			"values": ["+18", "18+", "эротика"]
            },
			
    "cover": {
			"skip": "<div id='Info'",
			"token1": "src=\"/i/book",
			"token2": "\"",
			"replace": {"prefix": "https://mangani.ru/i/book" }
			},
			
	"add_chapter": {
            
			"start": "<tbody>",
			"end": ">Обсуждение:</",
			"next": "<td class=",
			"link": {
				"before": "title='Получить",
				"token1": "href='",
				"token2": "'"
			},
            "uniq": {
				"before": "title='Получить",
				"token1": "'t'>",
				"token2": "</a",
				"replace": {"match": "<.*>", "text": ""}
			},
			"title": {
				"before": "title='Получить",
				"token1": "'t'>",
				"token2": "</a",
				"replace": [ {"match": "<.*>", "text": ""},
				{"match": "Главы", "text": "Глава"}]
			}
		}
		
},





"chapter_complete": {
	"headers": {
			"cookie": "mature=c3a2ed4b199a1a15f5a5483504c7a75a7030dc4bi%3A1%3B"
		},
    "add_numeration": true,     
    	
		"add_images": {
			"start": "images:",
			"token1": "[\"",
			"token2": "\"],",
			"split" : "\",\"",
			"end": "MangaReader.setControls",
			"replace": { "match": "\\\\", "text": "" }
		},
		"prefix": "https://mangani.ru/"
	},


	"test": [{
			"proc": "manga_list_complete",
			
			"assert": {
				"mangas": [{

					"link": "https://mangani.ru/book/173",
					"uniq": "27"
				}, {
					"link": "https://mangani.ru/book/328"
				}],
				"mangas_count": ">60"
			}
		},

		{
			"proc": "manga_complete",
			"link": "https://mangani.ru/book/173",
			"title": "Pervert Club / Клуб Извращенцев",
			"assert": {
				"cover": "https://mangani.ru/i/book/20/3/17858.jpg",
				"summary": "@^(Чертовски правдивая история о том)",
				"genres": "@fantasy",
				"status": "ongoing",
				"chapters_count": ">=300",
				"genres_count": ">=2",
				"rating": ">=4935200",

				"chapters": [
                {  "folder": "Глава 603/","link": "https://mangani.ru/book/22/76933/ready",
                 "title": "Глава 603" },
                {"link": "https://mangani.ru/book/22/36737/ready","title": "Глава 442"}
				            ]
			}
		},
		
		{
			"proc": "manga_complete",
			"link": "https://mangani.ru/book/328",
			"title": "Regarding My Reincarnation as a Slime",
			"additional_title": "О моём перерождении в слизь",
			"assert": {
				
				"genres": "@action",
				"status": "ongoing",
				"chapters_count": ">=70",
				"genres_count": ">=7",
				"rating": ">=1830",
                
				"chapters": [
				{
            "folder": "Глава 1/",
            "link": "https://mangani.ru/book/328/4762/ready",
            "title": "Глава 1"
            },
            {
            "folder": "Глава 2/",
            "link": "https://mangani.ru/book/328/4763/ready",
            "title": "Глава 2"
            }
		     ]
			}
		},
		
		{
			"proc": "chapter_complete",
			"link": "https://mangani.ru/book/328/4762/ready",
			"assert": [
		{"image": "https://mangani.ru/manga/328/4762/b8403ec12dda4ef5639aaa2d8ca9c4d4.jpg"},
        {"image": "https://mangani.ru/manga/328/4762/f3dafb07d615239b11e67bef7bbfed30.jpg"},
        {"image": "https://mangani.ru/manga/328/4762/ec79ece68535c09fe4d5d5d1c65e44f9.jpg"}
			]

		},

		{
			"proc": "chapter_complete",
			"link": "https://mangani.ru/book/22/105/ready",
			"assert": [
				{"image": "https://mangani.ru/manga/328/4762/test.jpg"},
                {"image": "https://mangani.ru/manga/328/4762/test.jpg"}
			]

		}
	]
}