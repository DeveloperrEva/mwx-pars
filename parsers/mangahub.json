{
	"id": 30414,
	"old_ids": [19001,40134],
	
	"version": 45,
	"title": "MangaHub",
	"host": "https://mangahub.ru",
	"public_link": "https://mangahub.ru/explore",
	"hash_tag": "mangahub",
	"folder": "mangahub",
	"name" : "mangahub",
	"language": "ru",
	"content_type": "manga",
	"is_paid": true,
	"chapters_order": false,
	"skip_catalog_test": false,
	"icon_link": "https://raw.githubusercontent.com/veopot/mwx-json/main/img/mangahub.png",
	"self_link": "https://raw.githubusercontent.com/veopot/mwx-json/main/parsers/mangahub.json",
	"self_link2": "https://fant.my1.ru/mwparser/mwx/json/mangahub.json",
	"catalog_link": "https://raw.githubusercontent.com/veopot/mwx-json/main/catalogs/mangahub.zip",
    "file_type": "sqlite",

	"manga_search_complete": {		
		"search_link": "https://mangahub.ru/search/manga?query=$query$&page=$page$",
		"query_type": "GET",
		"add_manga": {
			"next": "class=\"comic-grid-name",
			"link":  { "token1": "href=\"", "token2": "\"" },
			"title": { "skip": "href=\"", "token1": "\">", "token2": "</" },
            "uniq":  { "skip": "href=\"", "token1": "\">", "token2": "</" },
			"summary": { "token1": "<div class=\"comic-grid-extra text-muted mt-1\">",
			"token2": "</div>",
                "replace":{"match":"<.*?>", "text":""} },
				
			
			"cover": { "before": "href=\"", "token1": "data-background-image=\"", "token2": "\"" }
		}
	},

	"manga_list_complete": {
		"iterator": {
			
			"base_url": "https://mangahub.ru/explore?filter%5Bsort%5D=rating&filter%5Btype%5D%5Bexcludes%5D=&filter%5Bformats%5D%5Bexcludes%5D=&filter%5Bgenres%5D%5Bexcludes%5D=&filter%5Bstatus%5D%5Bexcludes%5D=&filter%5BstatusTranslation%5D%5Bexcludes%5D=&filter%5BageRating%5D%5Bexcludes%5D=&filter%5Bcountry%5D%5Bexcludes%5D=&page=",
			
			"append_nums": { "from": 1, "to": 450, "step": 1 }
		},
		"add_manga": {
			"next": "class=\"comic-grid-name",
			"link":  { "token1": "href=\"", "token2": "\"" },
			"title": { "skip": "href=\"", "token1": "\">", "token2": "</" },
            "uniq":  { "skip": "href=\"", "token1": "\">", "token2": "</" },
			"cover": { "before": "href=\"", "token1": "image=\"", "token2": "\"" }
		},
		"rating_auto_inc": {
			"start": "20000",
			"inc": -1
		}
	},

	"manga_complete": {
		"title": { "skip": "<head>", 
		"token1": "<title>Читать", "token2": "</title>",
		"replace":{ "match": "/", "text": " | " } },
		
		"uniq": { "skip": "class=\"page-head\">", 
		"token1": "<h1 class=\"text-white\">", "token2": "</h1>",
		"replace":{ "match": "<.*?>", "text": "" } },
		
		"cover": { "after": "class=\"cover cover-detail\"", "token1": "src=\"", "token2": "\"" },
		
		"author":      { "after": "<a href=\"/author/", "token1":"\">", "token2": "</",
		"replace":{ "match": "<.*?>", "text": "" } },
		
		"summary":     { "skip": "class=\"markdown-style text-expandable-content\">", 
		"token1": "<p>", "token2": "</div>",
		"replace":{ "match": "<.*?>", "text": "" } },
		
		 
		"status": { 
			"single":   { 
			    "start": "<div class=\"detail-attrs\">",
			    "end": " </div>",
			    "value": "Сингл" },
			
			"complete": { 
			    "start": "<div class=\"detail-attrs\">",
			    "end": " </div>",
			        "values": ["Выпуск завершен", "Переведена", "Завершен"	] },
			
			"ongoing":  { 
			    "start": "<div class=\"detail-attrs\">",
			    "end": " </div>",
			        "value": "Продолжается" },
			
			"empty":    { 
			    "start": "<div class=\"detail-attrs\">",
			    "end": " </div>",
			        "value": "Без глав" }
		},
		
		
		"add_genres":  { 
		 "start": "<collapse-multiple class=\"d-block tags mt-4\">",
		 "end": " </collapse-multiple>", 

		"after": "href=\"/genre/", "token1": "\">", "token2": "</"},
		
		 
		"is_mature":   { 
        "start": "<collapse-multiple class=\"d-block tags mt-4\">",
		 "end": " </collapse-multiple>",
		 "values": ["Эротика", "Юри", "Яой"] },
		
		"chapters_from_page": {
            "after": "property=\"og:url\"",
            "token1": "content=\"", 
			"token2": "\"", 
			"replace": [
				    {"sufix": "/chapters" },
					{ "prefix": "https://mangahub.ru"}
				] 
				
			
			},
		
		"add_chapter": {
			"start": ">Содержание<",
			"end": "</chapter-list>",
			
			"next":  " <div class=\"d-flex align-items-center min-w-0 flex-grow-1\">",
		
			"link":  { "token1": "href=\"", "token2": "\"" },
			
			"title": { "skip" : "href=\"", "token1": ">", "token2": "</a>",
				"replace" : { "match":"<.*?>","text":" "}
			},
			"uniq": { "skip" : "href=\"", "token1": ">", "token2": "</a>",
				"replace" : [{ "match" : "\n", "text" : "" }, { "match":"<.*?>","text":""}]
			}
		}
	},

	"chapter_complete": {
	    "headers": {
			"Accept": "*/*",
			"Referer": "https://mangahub.ru",
			"Accept-Language": "ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7"
		},
		"add_numeration": true,
		"add_images": {
			"start": "class=\"fast-view-wrapper\">",
			"end": "<div class=\"reader",
			"token1": "src&quot;:&quot;",
			"token2": "&quot",
			"replace" : [{ "prefix" : "https:" },{ "match" : "\\\\", "text" : "" }]
		}
		
	},

	"test": [
		{
			"proc" : "manga_list_complete",
			
			"assert" : {
				"mangas" : [
					{
                       "link": "https://mangahub.ru/cover_up",
                       "title": "Перекрыть"
                    },
                    {
                    "link": "https://mangahub.ru/incorrigible"
                    }
				],
				"mangas_count" : ">=40"
			}
		},
		{
			"proc" : "manga_complete",
			"link" : "https://mangahub.ru/title/their_story",
			"title" : "Их история",
			"assert" : {
				"author" : "@Тань Цзю",
				"cover" : "https://static.mangahub.ru/uploads/media/manga_cover/thumbnail/big/0006/69/568363.jpeg",
				"summary" : "@^(Забавная романтическая история о том)",
				"genres" : "@comedy",
				"status" : "unknown",
				"genres_count" : ">=3",
				"chapters_count" : ">=100",
				"chapters" : [
					{  
					"title": "Том 1. Глава 1 - Трудности знакомства",
					"link": "https://mangahub.ru/their_story/read/sayonara_melody/vol1/1/1/",
					"folder": "Том1.Глава1-Трудностизнакомства/"
					},
					{ 
					"title": "Том 1. Глава 3 - Потом",
 					"link": "https://mangahub.ru/their_story/read/oldxian/vol1/3/1/"
					}
				]
			}
		},
		{
			"proc" : "chapter_complete",
			"link" : "https://mangahub.ru/title/their_story/read/oldxian/vol1/3/1/",
			"assert" : {
				"pages" : [
		{"image": "https://1hubst.ru/uploads/media/scan/0001/36/5fe3946077063b9d5f2078ec7ad584fdb4da2129.jpeg"},
        {"image": "https://2hubst.ru/uploads/media/scan/0001/36/7b82658385742424548f638eb5b73068299728d0.jpeg"},
        {"image": "https://2hubst.ru/uploads/media/scan/0001/36/6315ee3005ecc1ef1c7f7349b694ca9f7cf26084.jpeg"}
				]
			}
		}
	]
}
