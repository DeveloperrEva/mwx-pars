{
    "id": 40254,
    "version": 1,
    "title": "Ранобэс",
    "host": "https://ranobes.com",
    "public_link": "https://ranobes.com/ranobe/",
    "folder": "ranobes",
    "name": "ranobes",
    "language": "ru",
    "encoding": "utf-8",
    "chapters_order": true,
    "icon_link": "https://fant.my1.ru/mwparser/mwx/img/ranobes.png",
    "self_link": "https://fant.my1.ru/mwparser/mwx/json/ranobes.json",
    "catalog_link": "https://fant.my1.ru/mwparser/mwx/catalog/ranobes.p",
    "author": {
        "name": "Veopot",
        "email": "fant-net@ya.ru"
    },
    "manga_list_complete": {
        "iterator": {
            "base_url": "https://ranobes.com/ranobe/page/",

            "append_nums": {
                "from": 1,
                "to": 100,
                "step": 1,
                "sufix": "/"
            }

        },
        "add_manga": {
            "next": "h2 class=\"title\">",
            "title": {
                "skip": "href=\"",
                "token1": "\">",
                "token2": "</a",
                "replace": [{
                        "match": "<span hidden>Новелла </span>",
                        "text": ""
                    }, {
                        "match": "<span hidden>Новелла</span>",
                        "text": ""
                    }, {
                        "match": "<span hidden>Ранобэ </span>",
                        "text": ""
                    }, {
                        "match": "<span hidden>Ранобэ</span>",
                        "text": ""
                    }
                ]
            },
            "link": {

                "token1": "href=\"",
                "token2": "\""
            },
            "uniq": {
                "skip": "href=\"",
                "token1": "\">",
                "token2": "</a",
                "replace": [{
                        "match": "<span hidden>Новелла </span>",
                        "text": ""
                    }, {
                        "match": "<span hidden>Новелла</span>",
                        "text": ""
                    }, {
                        "match": "<span hidden>Ранобэ </span>",
                        "text": ""
                    }, {
                        "match": "<span hidden>Ранобэ</span>",
                        "text": ""
                    }
                ]
            },
            "cover": {

                "token1": "class=\"cover\" style=\"background-image: url(",
                "token2": ");\">"
            }
        }
    },
    "manga_complete": {

        "content_type": {
            "default": "light_novels"
        },

        "title": {
            "skip": "property=\"og:title\"",
            "token1": "content=\"",
            "token2": "\""
        },
        "uniq": {
            "skip": "property=\"og:title\"",
            "token1": "content=\"",
            "token2": "\""
        },

        "cover": {
            "after": "property=\"og:image\"",
            "token1": "content=\"",
            "token2": "\""
        },
        "author": {
            "after": "/cloud/authors/",
            "token1": "\">",
            "token2": "</"
        },
        "summary": {
            "skip": "class=\"cont-text showcont-h\" itemprop=\"description\"",
            "token1": ">",
            "token2": "</div>",
            "replace": {
                "match": "<.*?>",
                "text": " "
            }
        },
        "add_genres": {
            "start": "itemprop=\"genre\">",
            "end": "</div>",
            "token1": "\">",
            "token2": "</"
        },
        "is_mature": {
            "values": [
                ">Для взрослых 18+<",
                ">Для взрослых 16+<",
                ">Сэйнэн<",
                ">Яой<"
            ]
        },

        "chapters_from_page": {
            "after": "read-begin",
            "token1": " href=\"",
            "token2": "\"",
            "replace": {
                "prefix": "https://ranobes.com/chapters"
            },
            "next": {
                "after": "class=\"page_next\"",
                "token1": " href=\"",
                "token2": "\"",
                "stop": "/span"
            }
        },

        "add_chapter": {
            "start": "<body>",
            "end": "</body>",

            "next": "class=\"cat_block cat_line",
            "link": {
                "token1": "href=\"",
                "token2": "\""
            },
            "uniq": {
                "skip": "href=\"",
                "token1": "title=\"",
                "token2": "\""
            },
            "title": {
                "skip": "href=\"",
                "token1": "title=\"",
                "token2": "\""
            }
        }

    },

    "chapter_complete": {
        "headers": {
            "cookie": "mature=c3a2ed4b199a1a15f5a5483504c7a75a7030dc4bi%3A1%3B"
        },

        "images": true,
        "add_pages": {
            "start": "property=\"og:url\"",
            "token1": "content=\"",
            "token2": "\"",
            "end": "property=\"og:description\""
        },
        "sufix": "?title=/ranobe.txt"
    },

    "test": [{
            "proc": "manga_list_complete",
            "assert": {
                "mangas": [{
                        "title": "Ленивый Хранитель Подземелья",
                        "link": "https://ranobes.com/ranobe/211314-lazy-dungeon-master.html",
                        "uniq": "Ленивый Хранитель Подземелья"
                    }
                ],
                "mangas_count": ">=30"
            }
        }, {
            "proc": "manga_complete",
            "link": "https://ranobes.com/ranobe/211314-lazy-dungeon-master.html",
            "title": "Ленивый Хранитель Подземелья",
            "assert": {
                "author": "Onikage Supana",
                "cover": "@https://ranobes.com/uploads/posts/2020-11/1606660495_lazy-dungeon-master.jpg",
                "summary": "@^(«Лень-двигатель прогресса».)",
                "genres": "@comedy",
                "status": "unknown",
                "genres_count": ">=6",
                "chapters_count": ">=30",
                "chapters": [{
                        "folder": "Vol.1-Ch.1/",
                        "link": "https://ranobes.com/manga/bleach/Vol.1-Ch.1",
                        "title": "Глава №1"
                    }, {
                        "link": "https://ranobes.com/manga/bleach/Vol.1-Ch.2",
                        "title": "Глава №2"
                    }
                ]
            }
        }, {
            "proc": "chapter_complete",
            "link": "https://ranobes.com/manga/bleach/Vol.1-Ch.1",
            "title": "Глава №1",
            "assert": {
                "pages": [{
                        "image": "https://ranobes.com/uploads/manga/bleach/chapters/Vol.1-Ch.1/001.png"
                    }, {
                        "image": "https://ranobes.com/uploads/manga/bleach/chapters/Vol.1-Ch.1/002.jpg"
                    }, {
                        "image": "https://ranobes.com/uploads/manga/bleach/chapters/Vol.1-Ch.1/003.jpg"
                    }
                ],
                "pages_count": "55"
            }
        }
    ]
}
